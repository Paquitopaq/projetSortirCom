<link rel="stylesheet" href="{{ asset('css/sidebar.css') }}">
<link rel="stylesheet" href="{{ asset('css/navbar.css') }}">

<nav class="navbar">
    <div class="nav-content">

        <!-- Logo à gauche -->
        <a href="{{ path('app_home') }}" class="logo">
            <img src="{{ asset('assets/images/logo.png') }}" alt="BougeTonCrew" class="logo-img">
        </a>

        <!-- Navigation au centre -->
        <div class="nav-links">
            <a href="{{ path('app_sortie') }}" class="nav-link"><i class="fas fa-compass"></i> Explorer les sorties</a>
        </div>

        <!-- Menu utilisateur à droite -->
        <div class="user-menu">
            {% if app.user %}
                <a href="{{ path('sortie_create') }}" class="become-host"><i class="fas fa-plus-circle"></i> Créer une sortie</a>

                <!-- Menu toggle avec checkbox pour la sidebar -->
                <input type="checkbox" id="sidebar-toggle" class="sidebar-checkbox" />
                <label for="sidebar-toggle" class="menu-toggle">
                    <div class="hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div class="user-avatar">
                        {% if app.user.photoProfil %}
                            <img class="user-avatar" src="{{ asset('assets/images/' ~ app.user.photoProfil) }}" alt="Avatar">
                        {% else %}
                            {{ app.user.email|slice(0, 1)|upper }}
                        {% endif %}
                    </div>
                </label>

                {# Sidebar intégrée dans le dropdown #}
                <div class="sidebar-dropdown">
                    <div class="sidebar-dropdown-header">
                        <div class="sidebar-user-info">
                            <img class="sidebar-user-avatar"
                                 src="{{ app.user.photoProfil ? asset('assets/images/' ~ app.user.photoProfil) : asset('icons/default.png') }}"
                                 alt="Avatar" />
                            <div>
                                <p class="sidebar-user-name">{{ app.user.email|split('@')|first }}</p>
                            </div>
                        </div>
                    </div>

                    <div class="sidebar-dropdown-content">
                        <!-- Section Compte -->
                        <div class="sidebar-section">
                            <h3 class="sidebar-section-title">Compte</h3>
                            <a href="{{ path('app_profil_participant', {id: app.user.id}) }}" class="sidebar-dropdown-item">
                                <i class="fas fa-user-circle"></i>
                                <span>Mon profil</span>
                            </a>
                            <a href="{{ path('app_profil_update') }}" class="sidebar-dropdown-item">
                                <i class="fas fa-cog"></i>
                                <span>Gérer son profil</span>
                            </a>
                            <a href="{{ path('app_logout') }}" class="sidebar-dropdown-item danger">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Déconnexion</span>
                            </a>
                        </div>

                        {% if is_granted('ROLE_ADMIN') %}
                            <!-- Section Administration -->
                            <div class="sidebar-section mt-3">
                                <h3 class="sidebar-section-title">Administration</h3>

                                <a href="{{ path('admin_dashboard') }}" class="sidebar-dropdown-item">
                                    <i class="fas fa-tachometer-alt"></i>
                                    <span>Dashboard</span>
                                </a>

                                <a href="{{ path('admin_users') }}" class="sidebar-dropdown-item">
                                    <i class="fas fa-users"></i>
                                    <span>Utilisateurs</span>
                                </a>

                                <a href="{{ path('admin_create_profil') }}" class="sidebar-dropdown-item">
                                    <i class="fas fa-user-plus"></i>
                                    <span>Créer un compte</span>
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>

                {# Overlay pour fermer la sidebar #}
                <label for="sidebar-toggle" class="sidebar-overlay"></label>
            {% else %}
                <a href="{{ path('app_login') }}" class="btn-auth">Se connecter</a>
                <a href="{{ path('app_register') }}" class="btn-auth-outline">S'inscrire</a>
            {% endif %}
        </div>
    </div>
</nav>
