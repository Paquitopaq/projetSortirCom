{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/register.css') }}">
{% endblock %}

{% block title %}Créer un compte{% endblock %}

{% block body %}
    <div class="auth-container">
        <div class="auth-wrapper">

            <!-- Section gauche avec formulaire -->
            <div class="auth-form-section">
                <div class="auth-form-content">

                    <h1 class="auth-title">Créer un compte</h1>

                    {# Messages flash d'erreur #}
                    {% for flash_error in app.flashes('verify_email_error') %}
                        <div class="alert alert-danger custom-alert">
                            <small>{{ flash_error }}</small>
                        </div>
                    {% endfor %}

                    {# Messages flash de succès #}
                    {% for flash_success in app.flashes('success') %}
                        <div class="alert alert-success custom-alert-success">
                            <small>{{ flash_success }}</small>
                        </div>
                    {% endfor %}

                    {{ form_start(registrationForm, {'attr': {'class': 'auth-form'}}) }}

                    <!-- Champ Email -->
                    <div class="form-group">
                        {{ form_label(registrationForm.email, 'Adresse e-mail', { 'label_attr': {'class': 'form-label'} }) }}
                        <div class="input-wrapper">
                                <span class="input-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                        <polyline points="22,6 12,13 2,6"></polyline>
                                    </svg>
                                </span>
                            {{ form_widget(registrationForm.email, { 'attr': { 'class': 'form-input', 'placeholder': 'votre@email.com' } }) }}
                        </div>
                        {% if form_errors(registrationForm.email) %}
                            <div class="field-error">
                                <small>{{ form_errors(registrationForm.email) }}</small>
                            </div>
                        {% endif %}
                    </div>

                    <!-- Champ Mot de passe -->
                    <div class="form-group">
                        {{ form_label(registrationForm.plainPassword, 'Mot de passe', { 'label_attr': {'class': 'form-label'} }) }}
                        <div class="input-wrapper">
                                <span class="input-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                </span>
                            {{ form_widget(registrationForm.plainPassword, { 'attr': { 'class': 'form-input', 'placeholder': '••••••••••' } }) }}
                        </div>
                        {% if form_errors(registrationForm.plainPassword) %}
                            <div class="field-error">
                                <small>{{ form_errors(registrationForm.plainPassword) }}</small>
                            </div>
                        {% endif %}
                    </div>

                    <!-- Checkbox Conditions -->
                    <div class="form-check-wrapper">
                        {% if registrationForm.agreeTerms is defined %}
                            <label class="container">
                                {{ form_widget(registrationForm.agreeTerms, { 'attr': { 'class': 'checkbox-input' } }) }}
                                <span class="checkmark"></span>
                                <span class="checkbox-label">Accepter les conditions d'utilisation</span>
                            </label>

                            {% if form_errors(registrationForm.agreeTerms) %}
                                <div class="field-error mt-2">
                                    <small>{{ form_errors(registrationForm.agreeTerms) }}</small>
                                </div>
                            {% endif %}
                        {% endif %}
                    </div>

                    <!-- Bouton inscription -->
                    <button type="submit" class="btn-submit">
                        Créer mon compte
                    </button>

                    {{ form_end(registrationForm) }}

                    <!-- Lien connexion -->
                    <div class="register-link">
                        <p class="register-text">
                            Vous avez déjà un compte ?
                            <a href="{{ path('app_login') }}" class="register-link-btn">Se connecter</a>
                        </p>
                    </div>

                </div>
            </div>

            <!-- Section droite avec illustration -->
            <div class="auth-illustration">
                <img src="{{ asset('assets/images/illustration-2.png') }}" alt="Illustration">
            </div>

        </div>
    </div>
{% endblock %}