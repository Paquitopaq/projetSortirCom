<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Accueil | MonApp{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">

    {% block stylesheets %}{% endblock %}
</head>

<body class="bg-light">
<!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-white shadow-sm fixed-top">
    <div class="container">
        <a class="navbar-brand fw-bold text-danger" href="{{ path('app_home') }}">
            {#            <img src="{{ asset('images/logo.svg') }}" alt="logo" width="30" class="me-2">#}
            MonApp
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item"><a class="nav-link" href="{{ path('app_register') }}">Inscription</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ path('app_login') }}">Connexion</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ path('sortie_create') }}">Cr√©ation Sortie</a></li>
            </ul>
        </div>
    </div>
</nav>

<!-- Hero section -->
<section class="container mt-5 pt-5">
    <div class="row align-items-center">
        <div class="col-md-6 mb-4">
            <h1 class="fw-bold mb-3">Sortir √† Niort</h1>

            <h3>Filtrer les sorties</h3>
            <form class="bg-white p-4 rounded-4 shadow-sm">
                <div class="mb-3">
                    <label class="form-label fw-semibold">Site</label>
                    <select class="form-select" name="lieu">
                        <option value="" selected>Choisir un lieu</option>
                        {% for lieu in lieux %}
                            <option value="{{ lieu.id }}">{{ lieu.nom }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label fw-semibold">Le nom de la sortie contient : </label>
                    <input type="text" name="nom_sortie" class="form-control" placeholder="search">
                </div>
                <div class="mb-3">
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Entre</label>
                        <input type="date" name="date_debut" class="form-control">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">et</label>
                        <input type="date" name="date_fin" class="form-control">
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label fw-semibold">Filtres :</label>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="organisateur" value="1" id="organisateur">
                        <label class="form-check-label" for="organisateur">Sorties dont je suis l'organisateur/trice</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="inscrit" value="1" id="inscrit">
                        <label class="form-check-label" for="inscrit">Sorties auxquelles je suis inscrit/e</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="non_inscrit" value="1" id="non_inscrit">
                        <label class="form-check-label" for="non_inscrit">Sorties auxquelles je ne suis pas inscrit/e</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="passees" value="1" id="passees">
                        <label class="form-check-label" for="passees">Sorties pass√©es</label>
                    </div>
                </div>


                <button class="btn btn-danger w-100 py-2 fw-bold">üîç Rechercher</button>
            </form>
        </div>

        <div class="col-md-6 position-relative">
            <img src="{{ asset('assets/images/niort-fond.jpg') }}"
                 class="img-fluid rounded-4 shadow mt-md-5"
                 style="margin-top: 40px; object-fit: cover;"
                 alt="Niort">
        </div>
    </div>
</section>

{% block body %}
    <div class="container mt-5">
        <div class="table-responsive">
            <table class="table table-striped table-hover align-middle">
                <thead class="table-danger">
                <tr>
                    <th>Nom de la sortie</th>
                    <th>Date de la sortie</th>
                    <th>Cl√¥ture</th>
                    <th>Inscrits/Places</th>
                    <th>√âtat</th>
                    <th>Inscrit</th>
                    <th>Organisateur</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for sortie in sorties %}
                    <tr>
                        <td>{{ sortie.nom }}</td>
                        <td>
                            {% if sortie.dateHeureDebut %}
                                {{ sortie.dateHeureDebut|date('d/m/Y H:i') }}
                            {% else %}
                                -
                            {% endif %}
                        </td>
                        <td>{{ sortie.dateLimiteInscription|date('d/m/Y') }}</td>
                        <td>{# TODO : nbInscriptionMax pour le max. Tu peux remplacer avec un compteur r√©el si tu as une table Inscription #}
                            0 / {{ sortie.nbInscriptionMax }}</td>
                        <td>{{ sortie.etat }}</td>
                        <td>
                            {# TODO : Ici tu peux afficher si l'utilisateur courant est inscrit #}
                            Non
                        </td>
                        <td>
                            {# TODO : Si tu as un champ organisateur dans Sortie, tu peux mettre : sortie.organisateur.nom #}
                            Admin
                        </td>
                        <td>
                            {# TODO : Lien vers le d√©tail /sortie/{id} ou d‚Äôautres actions #}
                            {#                            <a href="{{ path('app_sortie_detail', {'id': sortie.id}) }}" class="btn btn-sm btn-primary">Voir</a>#}
                            {# Autres actions : s'inscrire, annuler, etc. #}
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="7" class="text-center text-muted">
                            Aucune sortie trouv√©e.
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}


<button class="btn btn-danger w-40 py-2 fw-bold">Cr√©er une sortie</button>


<footer class="text-center text-muted py-4 mt-5 border-top">
    <small>&copy; {{ "now"|date("Y") }} MonApp ‚Äî Tous droits r√©serv√©s.</small>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{% block javascripts %}{% endblock %}
</body>
</html>